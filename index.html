
<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>GiSigh</title>
		<meta name="author" content="name">
    <meta name="description" content="description here">
		<meta name="keywords" content="keywords,here">
		<link href="https://unpkg.com/tailwindcss/dist/tailwind.min.css" rel="stylesheet"> <!--Replace with your tailwind.css once created-->
		<link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css" rel="stylesheet">
		<link rel="stylesheet" href="div_division.css">
		<script type="text/javascript" src="path/to/scripts/shCore.js"></script>
    <script type="text/javascript" src="path/to/scripts/shBrushPython.js"></script>
    <script type="text/javascript" src="path/to/scripts/shBrushRuby.js"></script>
    <link type="text/css" rel="stylesheet" href="path/to/css/shCore.css"/>
    <link type="text/css" rel="stylesheet" href="path/to/css/shThemeDefault.css"/>
    <script type="text/javascript">
        SyntaxHighlighter.config.clipboardSwf = 'path/to/scripts/clipboard.swf';
        SyntaxHighlighter.all();
    </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.3/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
	  <!-- Lightweight client-side loader that feature-detects and load polyfills only when necessary -->
	<script src="https://cdn.jsdelivr.net/npm/@webcomponents/webcomponentsjs@2/webcomponents-loader.min.js"></script>

	<!-- Load the element definition -->
	<script type="module" src="https://cdn.jsdelivr.net/gh/zerodevx/zero-md@1/src/zero-md.min.js"></script>

		
</head>
<body class="bg-gray-200 font-sans leading-normal tracking-normal">

	 

	<!--Header-->
	<div class="w-full m-0 p-0 bg-cover bg-bottom" style="background-image:url('cover.jpg'); height: 60vh; max-height:460px;">
			<div class="container max-w-4xl mx-auto pt-16 md:pt-32 text-center break-normal">
				<!--Title-->
					<p class="text-white font-extrabold text-3xl md:text-5xl">
						üëª GISigh: Brendan Hoover's Blog about data. 
					</p>
					<p class="text-xl md:text-2xl text-gray-500">Welcome to my Blog</p>
			</div>
		</div>
		
		<!--Container-->
		<div class="container px-4 md:px-0 max-w-6xl mx-auto -mt-32">
			
			<div class="mx-0 sm:mx-6">
				
				<!--Nav-->
				<nav class="mt-0 w-full">
					<div class="container mx-auto flex items-center">
						
						<div class="flex w-1/2 pl-4 text-sm">
							<ul class="list-reset flex justify-between flex-1 md:flex-none items-center">
								<li class="mr-2">
								<a class="inline-block text-gray-600 no-underline hover:text-gray-200 hover:underline py-2 px-2" href="https://my.indeed.com/p/brendanh-3zk3arc">Indeed Resume</a>
								</li>
								<li class="mr-2">
								<a class="inline-block text-gray-600 no-underline hover:text-gray-200 hover:underline py-2 px-2" href="https://www.linkedin.com/in/brendan-hoover-0226a9180/">LinkedIn</a>
								</li>
								
							</ul>
						</div>


						<div class="flex w-1/2 justify-end content-center">		
							<a class="inline-block text-gray-500 no-underline hover:text-white hover:text-underline text-center h-10 p-2 md:h-auto md:p-4 avatar" data-tippy-content="@gisigh" href="https://twitter.com/GISigh">
								<svg class="fill-current h-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"></path></svg>
							</a>
						
						</div>

					</div>
				</nav>

				<div class="bg-gray-200 w-full text-xl md:text-2xl text-gray-800 leading-normal rounded-t">
					
				<!--Lead Card-->
				<div class="flex h-full bg-white rounded overflow-hidden shadow-lg">
					
						
						<div class="w-full md:w-3/3 flex flex-col flex-grow flex-shrink">
						<p class="w-full text-gray-600 text-xs md:text-sm pt-6 px-6"></p>
						
						<p><div class="w-full font-bold text-xl text-gray-900 px-6">üëã October 28, 2020: Predicting the US Presidential Election</div></p>
						<div style="text-align:center"><iframe src="election_oct28.html"
								sandbox="allow-same-origin allow-scripts"
								width="100%"
								height="500"
								scrolling="no"
								seamless="seamless"
								frameborder="0">
							</iframe></div>
						
						<p><div class="w-full font-bold text-xl text-gray-900 px-6">Making the map</div></p>
						
						<p class="text-gray-800 font-serif text-base px-6 mb-5">Well, it doesn't look like much changed today, but here's a bit about how I made the above map.</p>
						
						<p><div class="w-full font-italic text-xl text-gray-700 px-6">Pulling the data from 538</div></p>
						
						
							<p class="text-gray-800 font-serif text-base px-6 mb-5">
								 First, I input the moduls I'll need. Then I pull the data from 538 and put it
									in a pandas dataframe. The nice thing about pulling the data from 538 is that I don't have to download it each day. The script takes care of that and it's easy peasy. </p>
							<div style="text-align:center"><iframe style="iframe" src="cell1.html"></iframe></div>					
							
							<p> </p>
							<p><div class="w-full font-italic text-xl text-gray-700 px-6">Weighting the polls and time</div></p>
							
							<p class="text-gray-800 font-serif text-base px-6 mb-5">
								Some election polls are better than others based on various factors like sampling design. I don't have any idea which ones are better, so I relied on 538's rankings. These are conveniently already in the dataset. So, I created a weighting scheme based on the letter grade, which can be seen in the below code snippet. It's pretty straight forward. An A+ is weighted more heavily than a poll with a C rating. See the code snippet below #Rank Weighting. 
								I also applied a weighted decay function of 30 days. This basically means that more recent days have the most impact, but as far back as 30 days still have some impact on weighting. 
								This allows us to consider most recent polls, but not toss out the other polls for 30 days. 
 </p>
							
							<div style="text-align:center"><iframe style="border: 0; width:100%; height: 700px; overflow: auto;" src="cell2.html"></iframe></div>
							
							<p><div class="w-full font-italic text-xl text-gray-700 px-6">The ARIMA Model</div></p>
							<p class="text-gray-800 font-serif text-base px-6 mb-5">
								Much like the master bedroom in MTV‚Äôs Cribs, the ARIMA model is where the magic happens. 
								I iterate through each state and apply the weighting from above. 
								I separate the Biden and Trump from each other in each state, which I think they‚Äôd both appreciate, and do some smoothing using a 7 day moving average. 
								I then run the ARIMA model using an Auto_Arima function, which makes life easy because I don‚Äôt have to make any choices. 
								The function runs a number of scenarios and chooses the one with lowest AIC. Again, Auto_Arima is run on each state and each candidate independently. 
								Interestingly, this is how 538 runs their model (state by state), the Economist uses National Polling. 
								I‚Äôm a bit little skeptical of using National Polls, but they make a nice case for it <a href = "https://projects.economist.com/us-2020-forecast/president/how-this-works"> 
								<b>here.</b></a>

								<p class="text-gray-800 font-serif text-base px-6 mb-5">There are a number of other models I could have run, but ARIMA is a pretty solid first go for Time Series.  </p>
</p>
							
							<div style="text-align:center"><iframe style="iframe" src="cell3.html"></iframe></div>
							
							<p><div class="w-full font-italic text-xl text-gray-700 px-6">Some Simple Bayes</div></p>
							<p class="text-gray-800 font-serif text-base px-6 mb-5">
								 Now that I‚Äôve run the ARIMA models and made some predictions on the percentage of votes for each state for Biden and Trump, I use those as my likelihoods in a simple Bayesian model.
								 This is about as simple a Bayes model as there is. I use those state likelihoods and pulled in some more data from 538 to use as my priors. 
								 Specifically, I use Vote Share of Incumbent and Vote Share of Challenger as my priors for each state. 
								 Determining these values on my own would take a lot of heavy lifting, so I cheat or ‚Äúleverage‚Äù (as the kids say) some of 538‚Äôs heavy lifting.
								 With those data it‚Äôs easy to compute the probability of each candidate winning a state. You‚Äôll notice that a state like Illinois is probably woefully underestimated. 
								 I chose the vote shares as a conservative estimate. 
								Still, in the end, my outcome is very close to that of 538, which isn‚Äôt bad for a short exercise. 


								
</p>
							
							<div style="text-align:center"><iframe style="iframe" src="cell4.html"></iframe></div>
							
							<p><div class="w-full font-italic text-xl text-gray-700 px-6">The Actual Mapping</div></p>
							<p class="text-gray-800 font-serif text-base px-6 mb-5">
								 Everything up to this point was data preparation to input to the map. 
								 If you‚Äôve read this far (gods bless you) you‚Äôve probably noticed that I was using geopandas, which pretty much has the same functionality as a normal pandas dataframe, 
								 but with the added bonus of being geographically located. With a little wrangling and the <a href = "https://bokeh.org/"> 
								<b>Bokeh </b></a>package it‚Äôs pretty easy to make a pretty decent map. 
								 
								 <p class="text-gray-800 font-serif text-base px-6 mb-5">And since this is all automated, I can run it every day until the election and see if there have been any big changes. </p>

</p>
							
							<div style="text-align:center"><iframe style="iframe" src="cell5.html"></iframe></div>
							
							<div class="flex-1 bg-white rounded-t rounded-b-none overflow-hidden shadow-lg">
						
						</div>
						
						<!-- Write your comments here --------------------------------------------------------------------------------------------------------------------------------------------------------------------->
						<div class="w-full font-bold text-xl text-gray-900 px-6">üëã October 27, 2020: Predicting the US Presidential Election</div>
							<div style="text-align:center"><iframe style="border: 0; width:100%; height: 600px; overflow: auto;" src="election.html"></iframe></div>
							<div class="flex-1 bg-white rounded-t rounded-b-none overflow-hidden shadow-lg">
								
								
								<p class="text-gray-800 font-serif text-base px-6 mb-5">
									I used an ARIMA model and some simple Bayesian Statistics to predict the November 3rd election. The model uses every poll available at 538 
									<a href = "https://projects.fivethirtyeight.com/polls-page/president_polls.csv" ><b>here.</b></a></p>
									
									<p class="text-gray-800 font-serif text-base px-6 mb-5">
									Since I don‚Äôt know anything about polls and which ones are good, I used 538‚Äôs poll ratings to derive a weighted mean for each day. 
									I also weighted the average using a 30-day decay, which smarter people than me seem to think is a good decay function for elections. 
									For missing dates, I used a simple interpolation and computed a 7-day rolling mean. I fed this data into the ARIMA model. 
									By using the auto_arima function available in the <a href = "https://pypi.org/project/pmdarima/" ><b>pmdarima</b><a/>
									python package, I was able to automate the modeling and can run it every day until the election. </p>
									
									<p class="text-gray-800 font-serif text-base px-6 mb-5">
									To get Bayesian priors for each candidate winning the state, I again turned to 538 
									<a href = "https://projects.fivethirtyeight.com/2020-general-data/presidential_state_toplines_2020.csv">
									<b>here.</b></p>
									
								
									
									<p class="text-gray-800 font-serif text-base px-6 mb-5">
									I used the Vote share of the incumbent (Trump) and Vote share of the challenger (Biden) for each state as a Bayesian prior. 
									I chose these as priors because they are conservative estimates, they probably underestimate the probability of
									Biden winning states like California and Illinois and Trump winning states like North Dakota and Montana. 
									However, these priors fit well for the toss up states, so they were a good choice for a short modeling exercise. 
									I used the final percentage from the ARIMA models as my likelihood for each candidate and calculated the Bayesian posteriors, which are displayed in the above map. 
									
									<p class="text-gray-800 font-serif text-base px-6 mb-5">
									My model is slightly more bullish on Biden than the <a href = "https://projects.fivethirtyeight.com/trump-biden-election-map/?cid=abcnews"
									> <b>538 model</b></a>, but not by much. </p>
									 
								</p>
							</div>

							
						</div>

					</a>
				</div>
				



	<footer class="bg-gray-900">	
		<div class="container max-w-6xl mx-auto flex items-center px-2 py-8">

			<div class="w-full mx-auto flex flex-wrap items-center">
				<div class="flex w-full md:w-1/2 justify-center md:justify-start text-white font-extrabold">
					<a class="text-gray-900 no-underline hover:text-gray-900 hover:no-underline" href="#">
						üëª <span class="text-base text-gray-200">GiSigh</span>
					</a>
				</div>
				<div class="flex w-full pt-2 content-center justify-between md:w-1/2 md:justify-end">
					<ul class="list-reset flex justify-center flex-1 md:flex-none items-center">
					  
					  </li>
					</ul>
				</div>
			</div>
        

		
		</div>
	</footer>

	<script src="https://unpkg.com/popper.js@1/dist/umd/popper.min.js"></script>
	<script src="https://unpkg.com/tippy.js@4"></script>
	<script>
		//Init tooltips
		tippy('.avatar')
	</script>
</body>
</html>
